library(RMySQL)
library(plotrix)
library(beanplot)

dir.create(paste("~/Temp_Graf_R/",sep=""),recursive = TRUE)

projects <- c("derby","tomcat","glibc","httpd","xen","kernel","mozilla")
metrics <- c("CountLineCode")

dataframe <- NULL

for(project in projects){
  con <- dbConnect(MySQL(), user = 'root', password = 'admin', host = 'localhost', dbname='software')
  vulnerable_query <- paste("SELECT * FROM software.FILES_affected_",project,sep = "")
  neutral_query <- paste("SELECT * FROM software.FILES_neutral_",project,sep = "")
  print(vulnerable_query)
  vulnerable_table_frame <- dbGetQuery(con,vulnerable_query)
  print(neutral_query)
  neutral_table_frame <- dbGetQuery(con,neutral_query)
  dbDisconnect(con)
  
  vulnerable_table_frame <- subset(vulnerable_table_frame, select = metrics)
  neutral_table_frame <- subset(neutral_table_frame, select = metrics)
  
  all <- rbind(vulnerable_table_frame,neutral_table_frame)
  resumo <- summary(all)
  media <- resumo[3]
  mediana <- resumo[2]
  
  dataframe <- rbind(dataframe, c(project,media,mediana))
}

neutral_table_frame<-NULL
vulnerable_table_frame<-NULL
